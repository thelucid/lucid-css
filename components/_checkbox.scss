@include palettes((
  checkbox: (
    foreground: palette(accent),
    background: palette(panel),
    border: palette(foreground, tint),
    shadow: palette(shadow),
    checked: (
      foreground: palette(panel),
      background: palette(accent),
      border: shade(palette(accent), 5%)
    )
  )
));

@include sizes((
  checkbox: (
    label: (
      font-size: size(font, small),
      font-weight: weight(normal)
    )
  )
));

.c-checkbox__control {
  position: absolute;
  z-index: -1;
  opacity: 0;
}
.c-checkbox__label {
  display: inline-block;
  position: relative;
  cursor: pointer;
  font-weight: size(checkbox, label, font-weight);
  font-size: size(checkbox, label, font-size);
  padding-left: size(spacing) + size(spacing, small);
  
  &:before {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    top: 0;
    border-radius: size(radius);
    background: palette(checkbox, background);
    box-shadow: inset 0 0 0 1px palette(checkbox, border),
                0 size(shadow) 0 palette(checkbox, shadow);
    width: size(spacing);
    height: size(spacing);
    
    .c-checkbox__control:checked + & {
      background: palette(checkbox, checked, background);
      box-shadow: inset 0 0 0 1px palette(checkbox, checked, border),
                  0 size(shadow) 0 palette(checkbox, shadow);
    }
  }
  &:after {
    .c-checkbox__control:checked + & {
      content: '';
      display: block;
      position: absolute;
      transform: rotate(45deg);
      box-shadow: inset -2px -2px 0 palette(checkbox, checked, foreground);
      top: rhythm(.5);
      left: rhythm(.5);
      width: rhythm(.3);
      height: rhythm(.6);
      margin-left: rhythm(-.15);
      margin-top: rhythm(-.35);
    }
  }
}